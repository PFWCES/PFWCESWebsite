---
import Layout from "../layouts/Layout.astro";
import HeroBanner from "../components/Sections/HeroBanner.astro";
import TheProblem from "../components/Sections/TheProblem.astro";
import OurPhilosophy from "../components/Sections/OurPhilosophy.astro";
import OurSolution from "../components/Sections/OurSolution.astro";
import SaveMoney from "../components/Sections/SaveMoney.astro";
import AboutUs from "../components/Sections/AboutUs.astro";
import TalkToUs from "../components/Sections/TalkToUs.astro";
import { baseUrl, baseImageUrl } from "../utils/domain.ts";
import type { imagesObject } from "../utils/types.ts";

let response = await fetch(`${baseUrl}home`);
let post = await response.json();
let data = post[0];
const {
	acf: {
		heading__herobanner,
		description__herobanner,
		button__herobanner,
		image__herobanner,
		subheading__herobanner,
		partnerlogo1__herobanner,
		partnerlogo2__herobanner,
		partnerlogo3__herobanner,
		partnerlogo4__herobanner,
		heading_small_text__philosophy,
		heading_big_text__philosophy,
		image__philosophy,
		list__philosophy,
		button__philosophy,
	},
} = data;

/* console.log(data); */

const imagesUrl: imagesObject[] = [];

if (partnerlogo1__herobanner && partnerlogo1__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo1__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo1__herobanner",
		url: imageUrl.guid.rendered,
	});
}

if (partnerlogo2__herobanner && partnerlogo2__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo2__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo2__herobanner",
		url: imageUrl.guid.rendered,
	});
}

if (partnerlogo3__herobanner && partnerlogo3__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo3__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo3__herobanner",
		url: imageUrl.guid.rendered,
	});
}

if (partnerlogo4__herobanner && partnerlogo4__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo4__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo4__herobanner",
		url: imageUrl.guid.rendered,
	});
}
---

<Layout title="Power From Within">
	<HeroBanner
		heading={heading__herobanner}
		description={description__herobanner}
		buttonText={button__herobanner}
		image={image__herobanner}
		subheading={subheading__herobanner}
		imagesArray={imagesUrl}
	/>
	<TheProblem />
	<OurPhilosophy
		heading_small_text={heading_small_text__philosophy}
		heading_big_text={heading_big_text__philosophy}
		image={image__philosophy}
		list={list__philosophy}
		buttonText={button__philosophy}
	/>
	<OurSolution />

	<SaveMoney />
	<AboutUs />
	<TalkToUs />
</Layout>

<style></style>
